{
  "hash": "649e9c5f54f5f62f6894d7c65009d440",
  "result": {
    "markdown": "---\ntitle: \"Jak se zbavit azbuky, čínštiny apod.\"\ndescription: |\n  Do dat se občas dostane nechtěná ruština, čínština, řečtina, nebo jiný jazyk psaný nelatinkovým písmem. Tohle je rychlý návod, jak se takových textů pomocí regulárních výrazů zbavit, nebo je naopak najít.\nauthor:\n  - name: Marek Prokop\n    affiliation: \"[PROKOP software s.r.o.](https://www.prokopsw.cz/cs)\"\ndate: 2022-05-01\ndf-print: kable\n---\n\n\n## Rychlý příklad\n\nMám tahle data:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\ndf <- tibble(\n  text = c(\n    \"Praha - Střešovice\",\n    \"Prague - Stresovice\",\n    \"布拉格 - Střešovice\",\n    \"Прага - Střešovice\",\n    \"Πράγα - Střešovice\"\n  ), \n  jazyk = c(\"česky\", \"anglicky\", \"čínsky\", \"rusky\", \"řecky\")\n)\n\ndf\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|text                |jazyk    |\n|:-------------------|:--------|\n|Praha - Střešovice  |česky    |\n|Prague - Stresovice |anglicky |\n|布拉格 - Střešovice |čínsky   |\n|Прага - Střešovice  |rusky    |\n|Πράγα - Střešovice  |řecky    |\n\n</div>\n:::\n:::\n\n\n### Chci odstranit texty v azbuce\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf |> \n  filter(!str_detect(text, \"[\\\\p{Cyrillic}]\"))\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|text                |jazyk    |\n|:-------------------|:--------|\n|Praha - Střešovice  |česky    |\n|Prague - Stresovice |anglicky |\n|布拉格 - Střešovice |čínsky   |\n|Πράγα - Střešovice  |řecky    |\n\n</div>\n:::\n:::\n\n\n### Chci odstranit texty v čínštině\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf |> \n  filter(!str_detect(text, \"[\\\\p{Han}]\"))\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|text                |jazyk    |\n|:-------------------|:--------|\n|Praha - Střešovice  |česky    |\n|Prague - Stresovice |anglicky |\n|Прага - Střešovice  |rusky    |\n|Πράγα - Střešovice  |řecky    |\n\n</div>\n:::\n:::\n\n\n### Chci odstranit texty v řečtině\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf |> \n  filter(!str_detect(text, \"[\\\\p{Greek}]\"))\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|text                |jazyk    |\n|:-------------------|:--------|\n|Praha - Střešovice  |česky    |\n|Prague - Stresovice |anglicky |\n|布拉格 - Střešovice |čínsky   |\n|Прага - Střešovice  |rusky    |\n\n</div>\n:::\n:::\n\n\n### Chci odstranit texty v čekmoli kromě latinky\n\nTo už je těžší. V předešlých případech jsem odstranil texty, které obsahovaly alespoň jeden znak z daného Unicode rozsahu, ale zde musím odstranit texty, které obsahují **jenom** znaky z daného rozsahu. Musím tedy zkombinovat tři část: \n\n- `{Latin}` -- latinkové znaky\n- `{Punct}` -- interpunkce\n- `\\x20` -- mezera (může být napsaná i normálně, ale byla by blbě vidět)\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf |> \n  filter(str_detect(text, \"^[\\x20\\\\p{Punct}\\\\p{Latin}]+$\"))\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|text                |jazyk    |\n|:-------------------|:--------|\n|Praha - Střešovice  |česky    |\n|Prague - Stresovice |anglicky |\n\n</div>\n:::\n:::\n\n\n### Chci najít...\n\nSamozřejmě to jde použít i pro hledání textů s určitými znaky.\n\nVšechny v azbuce:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf |> \n  filter(str_detect(text, \"[\\\\p{Cyrillic}]\"))\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|text               |jazyk |\n|:------------------|:-----|\n|Прага - Střešovice |rusky |\n\n</div>\n:::\n:::\n\n\nVšechny nelatinkové:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf |> \n  filter(!str_detect(text, \"^[\\x20\\\\p{Punct}\\\\p{Latin}]+$\"))\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|text                |jazyk  |\n|:-------------------|:------|\n|布拉格 - Střešovice |čínsky |\n|Прага - Střešovice  |rusky  |\n|Πράγα - Střešovice  |řecky  |\n\n</div>\n:::\n:::\n\nV případě potřeby něčeho speciálního poslouží [podrobný přehled Unicode v regulárních výrazech](https://www.regular-expressions.info/unicode.html).\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}